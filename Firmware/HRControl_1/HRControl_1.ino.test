#include <IcsHardSerialClass.h>
#include <WiFi.h>
#include <WiFiUdp.h>

const char ssid[] = "rmfhuman";       // SSID
const char password[] = "human2024";  // password

const char *RemoteIP = "10.42.0.1";  // 送信先のIPアドレス
const int RemotePort = 65535;        // 送信先のポート番号
const int LocalPort = 65534;         // 自身のポート番号

static WiFiUDP udp;
uint8_t packetBuffer[256];

void setup() {
    Serial.begin(115200);

    WiFi.begin(ssid, password);
    delay(100);
    Serial.print("Connect to WiFi");
    while (WiFi.status() != WL_CONNECTED) {
        Serial.print(".");
        delay(200);
    }
    Serial.println("\r\nSucess");
    udp.begin(LocalPort);
}

void loop() {
    int packetSize = udp.parsePacket();
    if (packetSize) {
        udp.beginPacket(RemoteIP, RemotePort);
        udp.read(packetBuffer, 256);
        udp.write(packetBuffer, packetSize);
        udp.endPacket();
    }
}